<!DOCTYPE html>
<html>
<head>
	<title>Problem 7. First larger than neighbours</title>
</head>
<body>
	<h1>Problem 7. First larger than neighbours</h1>
	<ul>
		<li>Write a function that returns the index of the first element in array that is larger than its neighbours or -1, if thereâ€™s no such element.</li>
		<li>Use the function from the previous exercise.</li>
	</ul>
	<p>Write some numbers with separated by ", ".</p>
	<p>Examle: "4, 1, 1, 4, 2, 3, 4, 4, 1, 2, 4, 9, 3"</p>
    <label>Array: </label><input type="text" name="array" id="arr" value="" />
	<button id="clickTrigger">Click</button>
	<p>First element larger than neighbors: <span id="result"></span></p>
		
	<script>
		var array = document.getElementById("arr"),
			result = document.getElementById("result"),
			clickTrigger = document.getElementById("clickTrigger");
		

		function onClickHandler() {
			var arr = array.value.split(",").map(function(item){ // Parse strings to numbers
				return item * 1;
			});

			//Invoke main logic function here
			result.innerHTML = findFirst(arr, largerThanNeighbours);
		}
		// Event listener
		clickTrigger.addEventListener("click", onClickHandler, false);

		// Pass function from task six as callback
		function findFirst(array, callback){
			for (var i = 1, len = array.length - 2; i < len; i += 1) {
				var currResult = callback(array, i);
				if (currResult != -1) {
					return currResult;
				};
			};
		}

		// Function from task number 6
		function largerThanNeighbours(array, index){
			//Chek if index has neighbours
			if ((index > (array.length - 2)) || (index < 1)) {
				console.log('error')
				return;
			}

			if (array[index-1] < array[index] && array[index] > array[index + 1]) {
				return index;
			}
			else{
				return -1;
			}
		}
	</script>
</body>
</html>